<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Peace Of Mind</title>
	<link href="/css/non-med-styles.css" rel="stylesheet">
</head>

<body class="container">

	<header>
		<nav>
			<img class="logo" src="images/logo.png" alt="logo">
			<h2>
				<a th:href="@{/non-medical-user(id=${nonMedicalUser.id})}">Account</a>

			</h2>
		</nav>
	</header>

	<div class="dashboard" th:if="${nonMedicalUser.patient}" th:each="patient : ${nonMedicalUser.patient}">
		<h1>Your Dashboard</h1>

		<section class="main">
			<h3>Medication Adherence</h3>
			<p>This Month</p>
			<section class="medAdherenceDash" th:if="${medications}">
				<div class="medStatus" th:each="medication : ${medications}">
						<img th:src=${medication.adherentThisMonth}>
						<h4><p id="medName" th:text=${medication.genericName}></p></h4>
				</div>
			</section>
							<a th:href="@{/med-tracker-history-non-med(id=${patient.id})}">Full Adherence History</a>
		</section>

		<section class="patientStatus" th:if="${status.id}">
			<h3>Current Patient Status</h3>
			<img th:src="@{'images/' + ${status.status.getImageFile()}}">
			<p>Entered at [[${status.printDateTime()}]]</p>
			<form method="GET">
				<p>Would you like to view the status history?</p>
				<input type="hidden" name="id" th:value="${patient.id}">
				<button type="submit" value="submit" formaction="/status-history">View Status History</button>
			</form>
		</section>


		<section class="medUser">
			<div th:if="${patient.medicalUser}" th:each="medicalUser : ${patient.medicalUser}">
				<h3>Medical Personnel Information</h3>
				<div>
					<h4>[[${medicalUser.firstName}]] [[${medicalUser.lastName}]]</h4>
					<ul>
						<li th:text=" 'Specialty: ' + (${medicalUser.medicalSpecialty} ?: 'unknown')"></li>
						<li th:text=" 'Institution: ' + (${medicalUser.medicalInstitution} ?: 'unknown')"></li>
						<li th:text=" 'Institution Phone: ' + (${medicalUser.institutionTelephone} ?: 'unknown')"></li>
						<li>Other Contact Methods</li>
						<ul>
							<li th:if="${medicalUser.contactInfo.phone}">[[${medicalUser.contactInfo.phone}]]</li>
							<li th:if="${medicalUser.contactInfo.email}">[[${medicalUser.contactInfo.email}]]</li>
						</ul>
					</ul>
				</div>
			</div>
		</section>


	</div>

	<footer>
		<small>&copy; 2018 Peace Of Mind WCCI Flex Fall Columbus Final project</small>
	</footer>

</body>

</html>
